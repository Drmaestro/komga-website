(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{469:function(e,t,a){"use strict";a.r(t);var o=a(34),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"run-with-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-with-docker"}},[e._v("#")]),e._v(" Run with Docker")]),e._v(" "),a("h2",{attrs:{id:"version-tags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version-tags"}},[e._v("#")]),e._v(" Version tags")]),e._v(" "),a("p",[e._v("This image provides various versions that are available via tags.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[a("strong",[e._v("Tag")])]),e._v(" "),a("th",[a("strong",[e._v("Description")])])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("latest")])]),e._v(" "),a("td",[e._v("latest commit")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("latest-legacy")])]),e._v(" "),a("td",[e._v("latest commit, using legacy AdoptOpenJDK base image")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("MAJOR.x")])]),e._v(" "),a("td",[e._v("latest "),a("code",[e._v("MAJOR")]),e._v(" version, for example "),a("code",[e._v("0.x")])])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("MAJOR.x-legacy")])]),e._v(" "),a("td",[e._v("latest "),a("code",[e._v("MAJOR")]),e._v(" version, using legacy AdoptOpenJDK base image")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("x.y.z")])]),e._v(" "),a("td",[e._v("version "),a("code",[e._v("x.y.z")])])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("x.y.z-legacy")])]),e._v(" "),a("td",[e._v("version "),a("code",[e._v("x.y.z")]),e._v(", using legacy AdoptOpenJDK base image")])])])]),e._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),a("p",[e._v("Here are some example snippets to help you get started creating a container.")]),e._v(" "),a("h3",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" docker")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker create \\\n  --name=komga \\\n  --user 1000:1000 \\\n  -p 8080:8080 \\\n  --mount type=bind,source=/path/to/config,target=/config \\\n  --mount type=bind,source=/path/to/data,target=/data \\\n  --restart unless-stopped \\\n  gotson/komga\n")])])]),a("p",[e._v("Then start the container:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker start komga\n")])])]),a("h3",{attrs:{id:"docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" docker-compose")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("---\nversion: '3.3'\nservices:\n  komga:\n    image: gotson/komga\n    container_name: komga\n    volumes:\n      - type: bind\n        source: /path/to/config\n        target: /config\n      - type: bind\n        source: /path/to/data\n        target: /data\n      - type: bind\n        source: /etc/timezone\n        target: /etc/timezone\n        read_only: true\n    ports:\n      - 8080:8080\n    user: \"1000:1000\"\n    # remove the whole environment section if you don't need it\n    environment:\n      - <ENV_VAR>=<extra configuration>\n    restart: unless-stopped\n")])])]),a("h2",{attrs:{id:"parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[e._v("#")]),e._v(" Parameters")]),e._v(" "),a("p",[e._v("Container images are configured using parameters passed at runtime (such as those above).\nThese parameters are separated by a colon and indicate "),a("code",[e._v("external:internal")]),e._v(" respectively.\nFor example, "),a("code",[e._v("-p 8080:80")]),e._v(" would expose port "),a("code",[e._v("80")]),e._v(" from inside the container to be accessible from the host's IP on port "),a("code",[e._v("8080")]),e._v(" outside the container.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[e._v("Parameter")]),e._v(" "),a("th",[e._v("Function")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("-p 8080")])]),e._v(" "),a("td",[e._v("The port for the Komga APIs and web interface")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("--user: 1000:1000")])]),e._v(" "),a("td",[e._v("User:Group identifier - see below for explanation")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("--mount type=bind,source=/path/to/config,target=/config")])]),e._v(" "),a("td",[e._v("Database and Komga configurations")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("--mount type=bind,source=/path/to/data,target=/data")])]),e._v(" "),a("td",[e._v("Location of your data directory on disk. Choose a folder that contains both your books and your preferred import location for hardlinks to work.")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("code",[e._v("-e ENV_VAR=value")])]),e._v(" "),a("td",[e._v("Any "),a("RouterLink",{attrs:{to:"/installation/configuration.html"}},[e._v("configuration")]),e._v(" environment variable")],1)])])]),e._v(" "),a("h2",{attrs:{id:"user-group-identifiers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-group-identifiers"}},[e._v("#")]),e._v(" User / Group Identifiers")]),e._v(" "),a("p",[e._v("When using volumes ("),a("code",[e._v("-v")]),e._v(" flags) permissions issues can arise between the host OS and the container, we avoid this issue by allowing you to specify the user ID and group ID.")]),e._v(" "),a("p",[e._v("Ensure any volume directories on the host are owned by the same user you specify and any permissions issues will vanish like magic.")]),e._v(" "),a("p",[e._v("In this instance "),a("code",[e._v("UID=1000")]),e._v(" and "),a("code",[e._v("GID=1000")]),e._v(", to find yours use "),a("code",[e._v("id <your_user>")]),e._v(" as below:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ id <your_user>\n  uid=1000(jdoe) gid=1000(jdgroup) groups=1000(jdgroup)\n")])])]),a("h2",{attrs:{id:"increase-memory-limit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#increase-memory-limit"}},[e._v("#")]),e._v(" Increase memory limit")]),e._v(" "),a("p",[e._v("By default the "),a("code",[e._v("java")]),e._v(" process will be limited in the maximum amount of memory (RAM) it can use, usually 1gb. If you encounter some "),a("code",[e._v("OutOfMemoryException")]),e._v(" in the logs you probably need to increase the maximum memory Komga can use.")]),e._v(" "),a("p",[e._v("To do so, you can use the "),a("code",[e._v("JAVA_TOOL_OPTIONS=-Xmx<limit>")]),e._v(" environment variable, where "),a("code",[e._v("<limit>")]),e._v(" can be any amount like "),a("code",[e._v("2048m")]),e._v(", "),a("code",[e._v("4g")]),e._v(" etc. For example to run Komga with a maximum of 4gb of memory:")]),e._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("JAVA_TOOL_OPTIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("-Xmx4g\n")])])]),a("h2",{attrs:{id:"support-info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#support-info"}},[e._v("#")]),e._v(" Support info")]),e._v(" "),a("ul",[a("li",[e._v("Shell access whilst the container is running: "),a("code",[e._v("docker exec -it komga /bin/bash")])]),e._v(" "),a("li",[e._v("To monitor the logs of the container in realtime: "),a("code",[e._v("docker logs -f komga")])])]),e._v(" "),a("h2",{attrs:{id:"updating"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updating"}},[e._v("#")]),e._v(" Updating")]),e._v(" "),a("p",[e._v("Below are the instructions for updating containers:")]),e._v(" "),a("h3",{attrs:{id:"via-docker-run-create"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#via-docker-run-create"}},[e._v("#")]),e._v(" Via Docker Run/Create")]),e._v(" "),a("ul",[a("li",[e._v("Update the image: "),a("code",[e._v("docker pull gotson/komga")])]),e._v(" "),a("li",[e._v("Stop the running container: "),a("code",[e._v("docker stop komga")])]),e._v(" "),a("li",[e._v("Delete the container: "),a("code",[e._v("docker rm komga")])]),e._v(" "),a("li",[e._v("Recreate a new container with the same docker create parameters as instructed above (if mapped correctly to a host folder, your "),a("code",[e._v("/config")]),e._v(" folder and settings will be preserved)")]),e._v(" "),a("li",[e._v("Start the new container: "),a("code",[e._v("docker start komga")])]),e._v(" "),a("li",[e._v("You can also remove the old dangling images: "),a("code",[e._v("docker image prune")])])]),e._v(" "),a("h3",{attrs:{id:"via-docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#via-docker-compose"}},[e._v("#")]),e._v(" Via Docker Compose")]),e._v(" "),a("ul",[a("li",[e._v("Update all images: "),a("code",[e._v("docker-compose pull")]),e._v(" "),a("ul",[a("li",[e._v("or update a single image: "),a("code",[e._v("docker-compose pull komga")])])])]),e._v(" "),a("li",[e._v("Let compose update all containers as necessary: "),a("code",[e._v("docker-compose up -d")]),e._v(" "),a("ul",[a("li",[e._v("or update a single container: "),a("code",[e._v("docker-compose up -d komga")])])])]),e._v(" "),a("li",[e._v("You can also remove the old dangling images: "),a("code",[e._v("docker image prune")])])]),e._v(" "),a("h3",{attrs:{id:"automatic-updates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#automatic-updates"}},[e._v("#")]),e._v(" Automatic updates")]),e._v(" "),a("p",[e._v("You can use "),a("a",{attrs:{href:"https://github.com/containrrr/watchtower",target:"_blank",rel:"noopener noreferrer"}},[e._v("Watchtower"),a("OutboundLink")],1),e._v(" to automatically update your containers.")])])}),[],!1,null,null,null);t.default=r.exports}}]);