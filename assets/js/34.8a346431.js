(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{404:function(t,a,e){"use strict";e.r(a);var s=e(26),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"social-login"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#social-login"}},[t._v("#")]),t._v(" Social login "),e("Badge",{attrs:{text:"0.130.0+"}})],1),t._v(" "),e("p",[t._v("Komga supports social login via "),e("strong",[t._v("OAuth2")]),t._v(" and "),e("strong",[t._v("OpenID Connect")]),t._v(". In order for this to work, Komga needs to retrieve the user's email address via your provider, and will match it with the email of the Komga users.")]),t._v(" "),e("p",[t._v("In order to setup social login, you will need to create an application in the developer portal of the social login provider of your choice (Google, Facebook, Githubâ€¦), and retrieve a "),e("em",[t._v("Client ID")]),t._v(" and "),e("em",[t._v("Client Secret")]),t._v(". You will also need to configure a "),e("em",[t._v("Redirect URI")]),t._v(" in the application you created.")]),t._v(" "),e("h2",{attrs:{id:"guide-for-common-providers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#guide-for-common-providers"}},[t._v("#")]),t._v(" Guide for common providers")]),t._v(" "),e("h3",{attrs:{id:"google"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#google"}},[t._v("#")]),t._v(" Google")]),t._v(" "),e("p",[t._v("Follow the instructions on the "),e("a",{attrs:{href:"https://developers.google.com/identity/protocols/OpenIDConnect",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenID Connect page"),e("OutboundLink")],1),t._v(', starting in the section, "Setting up OAuth 2.0".')]),t._v(" "),e("p",[t._v('When asked for a "Redirect URI", use '),e("code",[t._v("{baseUrl}/login/oauth2/code/google")]),t._v(", where "),e("code",[t._v("baseUrl")]),t._v(" is your server's address.")]),t._v(" "),e("p",[t._v('After completing the "Obtain OAuth 2.0 credentials" instructions, you should have a new OAuth Client with credentials consisting of a Client ID and a Client Secret.')]),t._v(" "),e("p",[t._v("Modify your "),e("code",[t._v("application.yml")]),t._v(" as below and replace the values in the "),e("code",[t._v("client-id")]),t._v(" and "),e("code",[t._v("client-secret")]),t._v(" property with the OAuth 2.0 credentials you created earlier.")]),t._v(" "),e("p",[t._v("Sample configuration:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registration")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("google")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1044613984fsf335"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mnsdvkjy3yf98294unfmnvd8.apps.googleusercontent.com\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jwhfkjhwefkn44t8vcxml3m\n")])])]),e("h3",{attrs:{id:"github"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[t._v("#")]),t._v(" Github")]),t._v(" "),e("p",[t._v("Register a "),e("a",{attrs:{href:"https://github.com/settings/applications/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("new application"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v('For the "Authorization callback URL", use '),e("code",[t._v("{baseUrl}/login/oauth2/code/github")]),t._v(", where "),e("code",[t._v("baseUrl")]),t._v(" is your server's address.")]),t._v(" "),e("p",[t._v("Generate a new Client Secret, you should now have a Client ID and Client Secret.")]),t._v(" "),e("p",[t._v("Modify your "),e("code",[t._v("application.yml")]),t._v(" as below and replace the values in the "),e("code",[t._v("client-id")]),t._v(" and "),e("code",[t._v("client-secret")]),t._v(" property with the OAuth 2.0 credentials you created earlier.")]),t._v(" "),e("p",[t._v("Sample configuration:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registration")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 62736jnfksui37384hnmsdnf\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jhjgfy67363uhif762328938844940e3e8c8629c18f9\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("email\n")])])]),e("h3",{attrs:{id:"keycloak"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#keycloak"}},[t._v("#")]),t._v(" Keycloak")]),t._v(" "),e("p",[t._v("If you run your own Keycloak install, you probably know how to setup OpenID Connect and obtain a Client ID and Client Secret.")]),t._v(" "),e("p",[t._v("Modify your "),e("code",[t._v("application.yml")]),t._v(" as below and replace the values in the "),e("code",[t._v("client-id")]),t._v(" and "),e("code",[t._v("client-secret")]),t._v(" property with your credentials You will also need to update the various URIs in the "),e("code",[t._v("provider")]),t._v(" section.")]),t._v(" "),e("p",[t._v("You need to make sure that Keyloak users have an email setup, and that it has been marked as verified.")]),t._v(" "),e("p",[t._v("Sample configuration:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registration")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keycloak")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" your"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("id\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" c830e452"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("a2a9"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("40a0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("93c1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("eb84ea688245\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Keycloak\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" openid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("email\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-grant-type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" authorization_code\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redirect-uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{baseUrl}/{action}/oauth2/code/{registrationId}"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keycloak")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8085/auth/realms/komgatest/protocol/openid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("connect/auth\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8085/auth/realms/komgatest/protocol/openid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("connect/token\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jwk-set-uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8085/auth/realms/komgatest/protocol/openid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("connect/certs\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user-info-uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8085/auth/realms/komgatest/protocol/openid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("connect/userinfo\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user-name-attribute")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sub\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);